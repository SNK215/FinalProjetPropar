{% extends 'base.html.twig' %}

{% block title %}Index utilisateurs
{% endblock %}

{% block javascripts %}{% endblock %}

{% block stylesheets %}{% endblock %}


{% block body %}
<br>
<h2>Liste des opérations en cours</h2>
<hr>

	<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/bs4/jqc-1.12.4/dt-1.11.5/datatables.min.css"/>
 
<script type="text/javascript" src="https://cdn.datatables.net/v/bs4/jqc-1.12.4/dt-1.11.5/datatables.min.js"></script>

	<table id="datatable" class="table table-striped table-bordered table-hover" style="width:100%">
		<thead>
			<tr>
				<th class="th-sm">Opération
				</th>
				<th class="th-sm">Description
				</th>
				<th class="th-sm">Client
				</th>
				<th class="th-sm">Employé
				</th>
				<th class="th-sm">Role
				</th>
				<th class="th-sm">Terminée ?
				</th>
				<th class="th-sm">Détail
				</th>
			</tr>
		</thead>
		<tbody>
			
			<tr>
				{% for operation in operations %}
                        <td class={% if operation.type == "Grosse" %} "table-danger" {% endif %} {% if operation.type == "Moyenne" %} "table-warning" {% endif %} {% if operation.type == "Petite" %} "table-primary" {% endif %}>{{ operation.type }}</td>

					
					<td>{{ operation.description }}</td>
					<td>{{ operation.nom }}
						{{ operation.prenom }}</td>
					<td>{{ operation.getUser().nom }}
						{{ operation.getUser().prenom }}</td>
					<td>
						{% if 'ROLE_SUPER_ADMIN' in operation.getUser().getroles(TRUE)  %}
							<p>Expert</p>
						{% endif %}

						{% if 'ROLE_ADMIN' in operation.getUser().getroles(TRUE)  %}
							<p>Senior</p>
						{% endif %}

						{% if 'ROLE_USER' in operation.getUser().getroles(TRUE)  %}
							<p>Apprenti</p>
						{% endif %}
					</td>
					
						{% if operation.archiver  %}
							<td>Non</td>
						{% else %}
							<td class="table-dark">Oui</td>
						{% endif %}
					
					
					<td>


						{# INSERER BOUTON DETAIL ICI #}


					</td>
				</tr>

			{% endfor %}

		</tbody>
		<tfoot>
			<tr>
				<th class="th-sm">Opération
				</th>
				<th class="th-sm">Description
				</th>
				<th class="th-sm">Client
				</th>
				<th class="th-sm">Employé
				</th>
				<th class="th-sm">Role
				</th>
				<th class="th-sm">Terminée ?
				</th>
				<th class="th-sm">Détail
				</th>
			</tr>
		</tfoot>

	</tbody>
</table>


<script type="text/javascript">
	$(document).ready(function () {
$('#datatable').DataTable();
});


</script>


{% endblock %}
