{% extends 'base.html.twig' %}

{% block title %}Index utilisateurs
{% endblock %}

{% block javascripts %}

{% endblock %}

{% block stylesheets %}

{% endblock %}


{% block body %}
<br>
<h2>Liste des employés</h2>
<hr>

<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/bs4/jqc-1.12.4/dt-1.11.5/datatables.min.css"/>
 
<script type="text/javascript" src="https://cdn.datatables.net/v/bs4/jqc-1.12.4/dt-1.11.5/datatables.min.js"></script>

	<table id="datatable" class="table table-striped table-bordered" style="width:100%">
		<thead>
			<tr>
				<th class="th-sm">Nom
				</th>
				<th class="th-sm">Prénom
				</th>
				<th class="th-sm">Email
				</th>
				<th class="th-sm">Role
				</th>
				<th class="th-sm">Action
				</th>
			</tr>
		</thead>
		<tbody>
			<tr>
				{% for user in users %}


					<td>{{ user.nom }}</td>
					<td>{{ user.prenom }}</td>
					<td>{{ user.username }}</td>
					<td>
						{% if 'ROLE_SUPER_ADMIN' in user.getroles(TRUE)  %}
							<p>Expert</p>
						{% endif %}

						{% if 'ROLE_ADMIN' in user.getroles(TRUE)  %}
							<p>Senior</p>
						{% endif %}

						{% if 'ROLE_USER' in user.getroles(TRUE)  %}
							<p>Apprenti</p>
						{% endif %}
					</td>
					<td>
						<div class="btn-group">
							<button type="button" class="btn btn-primary dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
								Action
							</button>
							<ul class="dropdown-menu">
								<li>
									<a class="dropdown-item" href="#">
										<form method="post" action="{{ path('app_delete', {'id': user.id}) }}" onsubmit="return confirm('Voulez-vous vraiment supprimer cet utilisateur  ?');">
											<input type="hidden" name="_token" value="{{ csrf_token('delete' ~ user.id) }}">
											<button class="btn">Supprimer</button>
										</form>
									</a>
								</li>
								<li>
									<a class="dropdown-item" href="#">
										<form method="post" action="{{ path("app_edit_user", {"id" : user.id}) }}" onsubmit="return confirm('Voulez-vous vraiment modifier cet utilisateur  ?');">

											<button class="btn">Modifier</button>
										</form>
									</a>

								</li>
							</ul>
						</div>
					</td>
				</tr>
			{% endfor %}
		</tbody>
		<tfoot>
			<tr>
				<th class="th-sm">Nom
				</th>
				<th class="th-sm">Prénom
				</th>
				<th class="th-sm">Email
				</th>
				<th class="th-sm">Role
				</th>
				<th class="th-sm">Action
				</th>
			</tr>
		</tfoot>

	</tbody>
</table>


<script type="text/javascript">
$(document).ready( function () {
    $('#datatable').DataTable();
} );

</script>

{% endblock %}
